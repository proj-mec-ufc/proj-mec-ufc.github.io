<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.2/svg.min.js"
        integrity="sha512-I+rKw3hArzZIHzrkdELbKqrXfkSvw/h0lW/GgB8FThaBVz2e5ZUlSW8kY8v3q6wq37eybIwyufkEZxe4qSlGcg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>

    <h1>Abaco iterativo</h1>

    <div style="width: 90%">
        <svg id="abaco" enable-background="new 0 0 1920 1080" version="1.1" viewBox="0 0 1920 1080" xml:space="preserve"
            sodipodi:docname="meuabacoalt.svg" inkscape:version="1.1.1 (3bf5ae0d25, 2021-09-20)"
            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
            xmlns:svg="http://www.w3.org/2000/svg">
            <defs id="defs909" />
            <style id="style2" type="text/css">
                .st0 {
                    display: none;
                }

                .st1 {
                    display: inline;
                }

                .st2 {
                    fill: #F5AF82;
                }

                .st3 {
                    fill: #5C5E60;
                }

                .st4 {
                    fill: #6D000A;
                }

                .st5 {
                    fill: #E0102C;
                }

                .st6 {
                    fill: #FFFFFF;
                }

                .st7 {
                    fill: #A60519;
                }

                .st8 {
                    fill: #B00023;
                }

                .st9 {
                    fill: #F5CF1C;
                }

                .st10 {
                    fill: #F8F07F;
                }

                .st11 {
                    fill: #DC74AC;
                }

                .st12 {
                    fill: #E4B0D1;
                }

                .st13 {
                    fill: #4F9936;
                }

                .st14 {
                    fill: #89C036;
                }

                .st15 {
                    fill: #1982D1;
                }

                .st16 {
                    fill: #4FADE7;
                }

                .st17 {
                    fill: #196B2E;
                }

                .st18 {
                    fill: #1F8337;
                }

                .st19 {
                    fill: #5C4093;
                }

                .st20 {
                    fill: #785BA4;
                }

                .st21 {
                    fill: #0F4EA0;
                }

                .st22 {
                    fill: #156FBC;
                }

                .st23 {
                    fill: #DE5728;
                }

                .st24 {
                    fill: #E58127;
                }

                .st25 {
                    fill: #005CAF;
                }

                .st26 {
                    fill: #127DDD;
                }

                .st27 {
                    fill: #FF0000;
                }

                .st28 {
                    fill: #F47F7F;
                }

                .st29 {
                    fill: #C64C09;
                }

                .st30 {
                    font-family: 'Georgia-Bold';
                }

                .st31 {
                    font-size: 20px;
                }

                .st32 {
                    font-size: 15px;
                }

                .st33 {
                    fill: none;
                    stroke: #C64C09;
                    stroke-width: 0.5;
                    stroke-miterlimit: 10;
                }
            </style>
            <g id="Camada_2">
                <g id="armacao">
                    <g id="direita">
                        <g id="g955">
                            <g id="g953">
                                <g id="g949">
                                    <path id="path947" class="st2"
                                        d="m1201.8 682 0.24-510.68c0-8.42 9.78-15.26 21.89-15.26 12.1 0 21.86 6.84 21.86 15.26v510.68h-43.99z" />
                                </g>
                                <path id="path951" class="st2"
                                    d="m1201.8 682 0.24-510.68c0-2.06 0.6-4.02 1.66-5.8 0.67-1.15 6.73-0.85 8.38-0.74 3.49 0.21 13.32 3.82 14.53 11.31 0 0.13 0.03 0.3 0.03 0.48l-0.68 471.86c0 11.59 10.01 14.29 19.84 13.64v19.93h-44z" />
                            </g>
                        </g>
                    </g>
                    <g id="esquerda">
                        <g id="g967">
                            <g id="g965">
                                <g id="g961">
                                    <path id="path959" class="st2"
                                        d="m458.08 682.65-0.34-510.68c0-8.42-13.58-15.26-30.39-15.26-16.8 0-30.35 6.84-30.35 15.26v510.68h61.08z" />
                                </g>
                                <path id="path963" class="st2"
                                    d="m458.08 682.65-0.29-510.68c0-2.06-0.71-4.02-1.98-5.8-0.8-1.15-8.05-0.85-10.02-0.74-4.17 0.21-15.93 3.82-17.37 11.31 0 0.13-0.03 0.3-0.03 0.48l0.81 471.86c0 11.59-11.97 14.29-23.73 13.64v19.93h52.61z" />
                            </g>
                        </g>
                    </g>


                    <path id="base_baixo" class="st2"
                        d="m 1311.4,660.8836 v -32.71095 c 0,-11.95565 -2.61,-21.64641 -5.83,-21.64641 H 355.06 c -3.22,0 -5.83,9.69076 -5.83,21.64641 v 32.71095 c 0,11.95564 2.61,21.6464 5.83,21.6464 h 950.51 c 3.22,-0.0371 5.83,-9.72789 5.83,-21.6464 z"
                        style="stroke-width:1.9269" />
                </g>
                <g id="barras">
                    <path id="b1" class="st3"
                        d="m1222.4 181.07h-782.74c-1.8 0-3.9 2.73-3.9 6.09s1.77 6.07 3.76 6.07h782.73c1.83 0 3.93-2.71 3.93-6.07-0.01-3.36-1.82-6.09-3.78-6.09z" />
                    <path id="b2" class="st3"
                        d="m1222.4 256.51h-782.74c-1.8 0-3.9 2.73-3.9 6.09 0 3.34 1.77 6.06 3.76 6.06h782.73c1.83 0 3.93-2.72 3.93-6.08-0.01-3.34-1.82-6.07-3.78-6.07z" />
                    <path id="b3" class="st3"
                        d="m1222.4 331.95h-782.74c-1.8 0-3.9 2.72-3.9 6.06 0 3.35 1.77 6.06 3.76 6.06h782.73c1.83 0 3.93-2.7 3.93-6.08-0.01-3.32-1.82-6.04-3.78-6.04z" />
                    <path id="b4" class="st3"
                        d="m1222.4 407.35h-782.74c-1.8 0-3.9 2.72-3.9 6.09 0 3.36 1.77 6.06 3.76 6.06h782.73c1.83 0 3.93-2.7 3.93-6.06-0.01-3.37-1.82-6.09-3.78-6.09z" />
                    <path id="b5" class="st3"
                        d="m1222.4 482.82h-782.74c-1.8 0-3.9 2.74-3.9 6.08s1.77 6.1 3.76 6.1h782.73c1.83 0 3.93-2.75 3.93-6.12-0.01-3.33-1.82-6.06-3.78-6.06z" />
                    <path id="b6" class="st3"
                        d="m1222.4 558.28h-782.74c-1.8 0-3.9 2.7-3.9 6.05 0 3.36 1.77 6.06 3.76 6.06h782.73c1.83 0 3.93-2.69 3.93-6.06-0.01-3.35-1.82-6.05-3.78-6.05z" />
                </g>
                <g id="l1">
                    <g id="base" class="base">
                        <g id="g1125">
                            <path id="path1123" class="st27"
                                d="m522.88 185.99c0 15.22-12.34 27.53-27.54 27.53-15.21 0-27.52-12.31-27.52-27.53 0-15.17 12.32-27.52 27.52-27.52 15.2 0.01 27.54 12.35 27.54 27.52z" />
                        </g>
                        <g id="g1129">
                            <path id="path1127" class="st28"
                                d="m513.8 181.07c0 11.13-8.99 20.13-20.1 20.13-11.13 0-20.13-8.99-20.13-20.13 0-11.12 9-20.12 20.13-20.12 11.11-0.01 20.1 9 20.1 20.12z" />
                        </g>
                    </g>
                </g>
                <g id="l2">
                    <g id="g16358" class="base">
                        <g id="g1107">
                            <g id="g1101">
                                <path id="path1099" class="st9"
                                    d="m523.11 259.66c0.21 15.23-11.93 27.74-27.11 27.96-15.19 0.22-27.69-11.88-27.96-27.1-0.22-15.18 11.92-27.69 27.11-27.93 15.23-0.25 27.73 11.9 27.96 27.07z" />
                            </g>
                            <g id="g1105">
                                <path id="path1103" class="st10"
                                    d="m514.05 255.16c0 11.14-9.02 20.13-20.1 20.13-11.13 0-20.13-8.99-20.13-20.13 0-11.09 9-20.09 20.13-20.09 11.08 0 20.1 9 20.1 20.09z" />
                            </g>
                        </g>

                    </g>
                </g>
                <g id="l3">
                    <g id="g1073" class="base">
                        <g id="g1067">
                            <path id="path1065" class="st25"
                                d="m526.23 336.83c0 15.22-12.34 27.52-27.5 27.52-15.24 0-27.56-12.3-27.56-27.52 0-15.19 12.33-27.51 27.56-27.51 15.17 0 27.5 12.32 27.5 27.51z" />
                        </g>
                        <g id="g1071">
                            <path id="path1069" class="st26"
                                d="m517.17 331.89c0 11.14-9.01 20.13-20.13 20.13-11.13 0-20.12-8.99-20.12-20.13 0-11.1 8.99-20.1 20.12-20.1 11.12 0.01 20.13 9.01 20.13 20.1z" />
                        </g>
                    </g>

                </g>
                <g id="l4">
                    <g id="g1013" class="base">
                        <g id="g1007">
                            <path id="path1005" class="st4"
                                d="m526 411.88c0 15.24-12.32 27.53-27.53 27.53-15.19 0-27.53-12.29-27.53-27.53 0-15.18 12.34-27.49 27.53-27.49 15.22-0.01 27.53 12.31 27.53 27.49z" />
                        </g>
                        <g id="g1011">
                            <path id="path1009" class="st7"
                                d="m516.91 406.95c0 11.14-8.97 20.14-20.09 20.14s-20.12-9.01-20.12-20.14c0-11.09 9-20.07 20.12-20.07 11.12-0.01 20.09 8.98 20.09 20.07z" />
                        </g>
                    </g>

                </g>
                <g id="l5">
                    <g id="g1207" class="base">
                        <g id="g1201">
                            <path id="path1199" class="st23"
                                d="m526.23 484.94c0 15.24-12.34 27.52-27.5 27.52-15.24 0-27.56-12.28-27.56-27.52 0-15.15 12.33-27.49 27.56-27.49 15.17 0 27.5 12.34 27.5 27.49z" />
                        </g>
                        <g id="g1205">
                            <path id="path1203" class="st24"
                                d="m517.17 480.03c0 11.13-9.01 20.13-20.13 20.13-11.13 0-20.12-9-20.12-20.13 0-11.11 8.99-20.12 20.12-20.12 11.12 0 20.13 9.01 20.13 20.12z" />
                        </g>
                    </g>

                </g>
                <g id="l6">
                    <g id="g1143" class="base">
                        <g id="g1137">
                            <path id="path1135" class="st13"
                                d="m526.23 562.96c0 15.21-12.34 27.53-27.5 27.53-15.24 0-27.56-12.32-27.56-27.53 0-15.2 12.33-27.52 27.56-27.52 15.17 0 27.5 12.33 27.5 27.52z" />
                        </g>
                        <g id="g1141">
                            <path id="path1139" class="st14"
                                d="m517.17 558.03c0 11.13-9.01 20.12-20.13 20.12-11.13 0-20.12-8.99-20.12-20.12 0-11.11 8.99-20.11 20.12-20.11 11.12-0.01 20.13 9 20.13 20.11z" />
                        </g>
                    </g>



                </g>
                <g id="mostrador" transform="translate(-177.35)">
                    <g id="g1461">
                        <path id="path1459" class="st2"
                            d="m 1578.9176,683 h -170.6447 c -2.7855,0 -5.0525,-2.23 -5.0525,-4.97 V 160.47 c 0,-2.74 2.267,-4.97 5.0525,-4.97 h 170.6447 c 2.7854,0 5.0524,2.23 5.0524,4.97 v 517.56 c 0,2.74 -2.267,4.97 -5.0524,4.97 z"
                            style="stroke-width:1.00826" />
                    </g>
                    <g id="g1465">
                        <path id="path1463" class="st2"
                            d="m1571 673.97h-151.94c-2.26 0-4.1-1.84-4.1-4.1v-501.24c0-2.26 1.84-4.1 4.1-4.1h151.94c2.26 0 4.1 1.84 4.1 4.1v501.25c0 2.26-1.84 4.09-4.1 4.09z" />
                    </g>
                </g>
                <g font-family="Georgia-Bold" font-size="42.667px" id="g903">
                    <text id="u1" class="st29 st30 st31" x="1248.325" y="212.17419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">1</text>
                    <text id="u2" class="st29 st30 st31" x="1249.8875" y="288.1767"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">2</text>
                    <text id="u3" class="st29 st30 st31" transform="scale(.98351 1.0168)" x="1270.7655" y="358.1442"
                        stroke-width=".98351"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66596337px">3</text>
                    <text id="u4" class="st29 st30 st31" x="1250.9291" y="438.45419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">4</text>
                    <text id="u5" class="st29 st30 st31" x="1249.7208" y="513.92419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">5</text>
                    <text id="u6" class="st29 st30 st31" x="1250.0333" y="589.94672"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">6</text>
                    <text id="total" class="st29 st30 st31" x="1249.8875" y="663.65656"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">2</text>
                    <text id="text1483" class="st29 st30 st31" x="1314.0879" y="212.17419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">U</text>
                    <text id="text1485" class="st29 st30 st31" x="1312.442" y="287.6142"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">D</text>
                    <text id="text1487" class="st29 st30 st31" transform="scale(.98351 1.0168)" x="1337.0537"
                        y="358.1442" stroke-width=".98351"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66596337px">C</text>
                    <text id="text1489" class="st29 st30 st31" x="1311.2858" y="438.45419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">M</text>
                    <text id="text1491" class="st29 st30 st31" x="1294.8586" y="513.92419"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">DM</text>
                    <text id="text1493" class="st29 st30 st31" x="1297.2858" y="589.94672"
                        style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;-inkscape-font-specification:'Georgia-Bold, Normal';font-family:Georgia-Bold;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:42.66666667px">CM</text>
                    <text id="text1495" class="st29 st30 st31" x="1127.942" y="664.29865"
                        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:42.6667px;font-family:Georgia-Bold;-inkscape-font-specification:'Georgia-Bold, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal">Total</text>
                </g>
                <line id="line1497" class="st33" x1="1261" x2="1400" y1="604" y2="604" />
            </g>
        </svg>
    </div>

</body>
<script>
    var bolas = [];
    var numeros = []
    var mostradorTotal = SVG('#abaco').findOne('#total');
    mostradorTotal.text('0');
    for (let i = 1; i < 7; i++) {
        let bola = SVG('#abaco').findOne('#l' + i);
        let barra = SVG('#abaco').findOne('#b' + i);
        let numero = SVG('#abaco').findOne('#u' + i);
        numeros.push(numero);
        numero.text("0");
        let linha = [];

        for (let b = 0; b < 10; b++) {
            let nb = bola.clone();
            nb.id('l' + i + "" + b);
            nb.ligado = false;
            nb.addTo(bola.parent())
            nb.x(b * nb.width() + barra.x());
            nb.mouseover((e) => {
                nb.css('stroke', 'black');
                nb.css('stroke-width', '7px');
                nb.css('stroke-opacity', '0.5');
            });
            nb.mouseout((e) => {
                nb.css('stroke', 'black');
                nb.css('stroke-width', '0px');
                nb.css('stroke-opacity', '0.5');
            });
            nb.click((e) => {
                if (nb.ligado) {
                    for (let p = 0; p <= b; p++) {
                        let mo = bolas[i - 1][p];
                        mo.ligado = false;
                        mo.animate().x(barra.x() + p * mo.width());
                    }
                    numero.text(10 - b - 1);
                } else {
                    for (let p = 9; p >= b; p--) {
                        let mo = bolas[i - 1][p];
                        mo.ligado = true;
                        mo.animate().x(barra.x() + barra.width() - (10 - p) * mo.width());
                    }
                    numero.text(10 - b);
                }
                base = 1;
                total = 0;
                for (n of numeros) {
                    total += base * Number(n.text());
                    base *= 10;
                }
                console.log(total);
                mostradorTotal.text(total);
            });
            linha.push(nb);
        }
        bolas.push(linha);
        bola.remove();
    }
</script>

</html>